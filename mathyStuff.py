import numpy as np
import matplotlib.pyplot as plt
from shapely.geometry import LineString
import pandas as pd
import scipy

def section_y(y_coord,sectionNo):
    for n in range(sectionNo):
        if n == 0:
            if y_coord >= 0 and y_coord <= (720/sectionNo)*(n+1):
                return 1
        else:
            if y_coord > (720/sectionNo)*n and y_coord <= (720/sectionNo)*(n+1):
                return n+1

#WIN_20250730_23_12_07_Pro - ? frame interval
positionsRaw = [-0.5325853824615479, -0.5301042199134827, -0.5247068405151367, -0.5205500721931458, -0.5244581699371338, -0.40609338879585266, -0.5285013914108276, -0.3726186454296112, -0.5205764770507812, -0.26383814215660095, -0.27307769656181335, -0.2659529745578766, -0.487113356590271, -0.4983258545398712, -0.5466229319572449, -0.5200075507164001, -0.5250523090362549, -0.28351128101348877, -0.1844327300786972, -0.21245239675045013, -0.3286295533180237, -0.4397791624069214, -0.4914955496788025, -0.5162328481674194, -0.5215202569961548, -0.5135793685913086, -0.523714005947113, -0.5248959064483643, -0.5273776054382324, -0.5142015814781189, -0.5054910778999329]
#WIN_20250730_23_12_07_Pro - 3 frame interval
positionsRaw = [-0.5325853824615479, -0.5281127691268921, -0.5290588736534119, -0.5304548144340515, -0.5333521366119385, -0.5307444930076599, -0.5278468728065491, -0.5253414511680603, -0.5260096192359924, -0.5239031910896301, -0.5205500721931458, -0.5306524634361267, -0.5255883932113647, -0.524369478225708, -0.5246816873550415, -0.5251373648643494, -0.5070542097091675, -0.1596561074256897, -0.2748352587223053, -0.5370266437530518, -0.5285013914108276, -0.5342650413513184, -0.49714159965515137, -0.2835574746131897, -0.5381671786308289, -0.5254161357879639, -0.518320620059967, -0.4009876549243927, -0.2913513481616974, -0.27032309770584106, -0.26383814215660095, -0.2635855972766876, -0.2839866280555725, -0.2706622779369354, -0.26878300309181213, -0.2752262353897095, -0.27787482738494873, -0.2728360891342163, -0.29231274127960205, -0.5037683248519897, -0.487113356590271, -0.5147505402565002, -0.5232182741165161, -0.5123218297958374, -0.5065184831619263, -0.502612829208374, -0.5622235536575317, -0.535287618637085, -0.5270190238952637, -0.5210617184638977, -0.5200075507164001, -0.541414201259613, -0.5318821668624878, -0.5302230715751648, -0.5434635281562805, -0.5190985202789307, -0.5285911560058594, -0.27763038873672485, -0.2040533721446991, -0.2954142689704895, -0.1844327300786972, -0.17900443077087402, -0.16740913689136505, -0.2021346390247345, -0.25773367285728455, -0.29369816184043884, -0.31485310196876526, -0.34699833393096924, -0.3636628985404968, -0.3990092873573303, -0.4397791624069214, -0.4539563059806824, -0.49906352162361145, -0.4753902852535248, -0.5068198442459106, -0.5249791145324707, -0.5217489004135132, -0.5153177976608276, -0.5169880390167236, -0.5179898142814636, -0.5215202569961548, -0.5156538486480713, -0.5198249220848083, -0.515617847442627, -0.5224604606628418, -0.5288903713226318, -0.521913468837738, -0.5141330361366272, -0.5209856033325195, -0.5262646675109863, -0.5248959064483643, -0.5159061551094055, -0.5285964012145996, -0.5232099890708923, -0.5195029377937317, -0.5208622217178345, -0.5146800875663757, -0.5166069269180298, -0.5134304761886597, -0.5117613673210144, -0.5054910778999329, -0.5076296925544739]

#WIN_20250807_20_17_58_Pro
#positionsRaw = [-0.5608647465705872, -0.5536587238311768, -0.5622057318687439, -0.5620261430740356, -0.5527336001396179, -0.5601052045822144, -0.5631847977638245, -0.5633286833763123, -0.563846230506897, -0.5578454732894897, -0.5580744743347168, -0.5526522994041443, -0.5554810166358948, -0.5541868209838867, -0.5511574149131775, -0.5489715337753296, -0.548963189125061, -0.5487770438194275, -0.5499101281166077, -0.5513571500778198, -0.5496830940246582, -0.5528275966644287, -0.551863968372345, -0.5514417290687561, -0.5467627644538879, -0.5563977360725403, -0.556644082069397, -0.554835319519043, -0.5545819401741028, -0.5552387237548828, -0.5452216863632202, -0.5576455593109131, -0.5581643581390381, -0.5507424473762512, -0.5572686791419983, -0.552227795124054, -0.5497901439666748, -0.5491484999656677, -0.5468947291374207, -0.5500713586807251, -0.5208626985549927, -0.47224465012550354, -0.3525330722332001, -0.5009884238243103, -0.2981514632701874, -0.36619898676872253, -0.3470744788646698, -0.34469074010849, -0.35656026005744934, -0.43973803520202637, -0.29499557614326477, -0.3342593014240265, -0.3190910220146179, -0.28801995515823364, -0.30312636494636536, -0.4458253085613251, -0.3364444673061371, -0.30499616265296936, -0.28574973344802856, -0.30413082242012024, -0.32767951488494873, -0.3177843391895294, -0.31390413641929626, -0.3087162971496582, -0.29979193210601807, -0.3080423176288605, -0.31682640314102173, -0.32097214460372925, -0.31545591354370117, -0.3176996111869812, -0.30917513370513916, -0.30355778336524963, -0.3207850158214569, -0.3304082155227661, -0.33282893896102905, -0.3169157803058624, -0.2958860397338867, -0.3765779733657837, -0.32644593715667725, -0.32537177205085754, -0.31990721821784973, -0.3208417594432831, -0.3117216229438782, -0.31285345554351807, -0.3166409432888031, -0.3156598210334778, -0.3135005831718445, -0.315378874540329, -0.3126692771911621, -0.3193133771419525, -0.29934534430503845, -0.30136802792549133, -0.29735127091407776, -0.29812338948249817, -0.3094233572483063, -0.30369123816490173, -0.3669336140155792, -0.24740836024284363, -0.21350950002670288, -0.2337730973958969, -0.24510227143764496, -0.25921252369880676, -0.2677781283855438, -0.2674201726913452, -0.2718052566051483, -0.26103416085243225, -0.234442800283432, -0.23870345950126648, -0.2321828156709671, -0.2439684271812439, -0.2488136738538742, -0.24135614931583405, -0.23188577592372894, -0.23382118344306946, -0.23081357777118683, -0.24002550542354584, -0.24745148420333862, -0.24022236466407776, -0.2565109133720398, -0.2438303679227829, -0.24652114510536194, -0.2357916235923767, -0.23706133663654327, -0.24428579211235046, -0.24618107080459595, -0.22739963233470917, -0.24289561808109283, -0.2229260355234146, -0.2266845554113388, -0.2272949367761612, -0.27438583970069885, -0.2874867916107178, -0.25950902700424194, -0.2707371711730957, -0.2681290805339813, -0.2913825213909149, -0.505914032459259, -0.28311124444007874, -0.29635947942733765, -0.2892106771469116, -0.28551769256591797, -0.28606367111206055, -0.2848551571369171, -0.2820169925689697, -0.30019330978393555, -0.2886866629123688, -0.3373805582523346, -0.33450156450271606, -0.45622995495796204, -0.4942401945590973, -0.5075339078903198, -0.5592129230499268, -0.5714030861854553, -0.5641293525695801, -0.5730985403060913, -0.5575065612792969, -0.5665095448493958, -0.5675387382507324, -0.5712109804153442]

#positionsRaw = [-0.5487394332885742, -0.5456001162528992, -0.5480575561523438, -0.5685305595397949, -0.5454643964767456, -0.5481901168823242, -0.5483039617538452, -0.5104462504386902, -0.5337873697280884, -0.5196753740310669, -0.5073473453521729, -0.5130718350410461, -0.5025277137756348, -0.5184731483459473, -0.48305463790893555, -0.5189809203147888, -0.5242972373962402, -0.5273551344871521, -0.46455875039100647, -0.44850823283195496, -0.4868045747280121, -0.5032780170440674, -0.5108714699745178, -0.4288733899593353, -0.4919275939464569, -0.45334142446517944, -0.46164244413375854, -0.43710169196128845, -0.5200451016426086, -0.5001036524772644, -0.4986776113510132, -0.3812040686607361, -0.46808484196662903, -0.5081568360328674, -0.4558117389678955, -0.5544812679290771, -0.5446252822875977, -0.37596291303634644, -0.2875831723213196, -0.4391776919364929, -0.3801746666431427, -0.4622561037540436, -0.41480517387390137, -0.39815378189086914, -0.4299168884754181, -0.41444939374923706, -0.40169447660446167, -0.4267593324184418, -0.4108484387397766, -0.3431186378002167, -0.4120084047317505, -0.41699278354644775, -0.3599002957344055, -0.402701199054718, -0.4104255735874176, -0.4102693200111389, -0.42681777477264404, -0.4409027099609375, -0.4562623202800751, -0.4425475597381592, -0.4442615211009979, -0.44183802604675293, -0.3677114248275757, -0.38218358159065247, -0.3722921907901764, -0.3796590566635132, -0.3823210895061493, -0.34804943203926086, -0.5057900547981262, -0.6008517742156982, -0.5588468909263611, -0.551742434501648, -0.5509993433952332, -0.5340068340301514, -0.48054322600364685, -0.5505767464637756, -0.46372872591018677, -0.3699273467063904, -0.39193302392959595, -0.38868391513824463, -0.3671024739742279, -0.3816691040992737, -0.3432287573814392, -0.4224630892276764, -0.5449060797691345, -0.4312500059604645, -0.4265431761741638, -0.5283615589141846, -0.42606276273727417, -0.403642475605011, -0.43859413266181946, -0.4200725555419922, -0.3889784812927246, -0.46474534273147583, -0.5431596040725708, -0.5545910596847534, -0.5493809580802917, -0.532088041305542, -0.5135778188705444, -0.5098484754562378, -0.5132182836532593, -0.5461300611495972, -0.5478014349937439, -0.5533897280693054, -0.5589211583137512, -0.5558322668075562, -0.5564947724342346, -0.5594906210899353, -0.5581611394882202, -0.5596962571144104, -0.5576977133750916, -0.5454510450363159, -0.5712703466415405, -0.38966619968414307, -0.5144249796867371, -0.5096797347068787, -0.4418351948261261, -0.5013300776481628, -0.45732930302619934, -0.5311780571937561, -0.4124690592288971, -0.4448331296443939, -0.4123997092247009, -0.496725857257843, -0.4323216676712036, -0.4714202582836151, -0.37223386764526367, -0.4784618318080902, -0.45170271396636963, -0.5216473340988159, -0.5625842213630676, -0.5152930617332458, -0.5665940642356873, -0.505734920501709, -0.5242438912391663, -0.39060288667678833, -0.40662696957588196, -0.47505712509155273, -0.4843079745769501, -0.5363353490829468, -0.4594810903072357, -0.4221419394016266, -0.45898640155792236, -0.5079809427261353, -0.4770529568195343, -0.5620664954185486, -0.556859016418457, -0.4858088493347168, -0.3788103461265564, -0.4251663088798523, -0.3760714530944824, -0.3643641173839569, -0.4139161705970764, -0.3706666827201843, -0.4921014904975891, -0.37521129846572876, -0.46824246644973755, -0.45536404848098755, -0.5563980340957642, -0.5444576740264893, -0.5600857138633728, -0.5518373847007751, -0.5496876835823059, -0.5061298608779907, -0.5275072455406189, -0.5087194442749023, -0.5138834714889526, -0.5235146284103394, -0.5304703712463379, -0.5325214862823486, -0.5346775650978088, -0.525321364402771, -0.529176652431488, -0.5124203562736511, -0.5110419988632202, -0.5031708478927612, -0.5118680000305176, -0.49583134055137634, -0.511654794216156, -0.4957394003868103, -0.4929341673851013, -0.5064615607261658, -0.505266547203064, -0.5550753474235535, -0.5451611280441284, -0.5487560033798218, -0.5470869541168213, -0.547314465045929, -0.5453840494155884, -0.5429956912994385, -0.5477694272994995, -0.551960289478302, -0.5512006878852844, -0.5562561750411987, -0.5467765927314758, -0.5428956151008606, -0.5462566614151001, -0.5489434003829956, -0.5561537146568298, -0.5512233972549438, -0.5439226031303406, -0.5464651584625244, -0.5450199842453003, -0.5211634635925293, -0.5620511174201965, -0.547993004322052]

#WIN_20250807_19_07_53_Pro
#positionsRaw = [-0.6194545030593872, -0.6261144876480103, -0.6144956946372986, -0.6064348816871643, -0.5975335240364075, -0.6059531569480896, -0.6114587783813477, -0.6107118725776672, -0.6071372628211975, -0.6085165739059448, -0.6094580292701721, -0.6111363172531128, -0.6143379807472229, -0.6106725335121155, -0.6004202961921692, -0.5972669124603271, -0.6039623618125916, -0.6017809510231018, -0.6057973504066467, -0.6050704717636108, -0.6037896275520325, -0.5991820096969604, -0.6046565771102905, -0.6007012724876404, -0.6050994992256165, -0.6041679978370667, -0.6034728288650513, -0.6039924025535583, -0.6025302410125732, -0.6009629964828491, -0.596050500869751, -0.598336935043335, -0.5958999395370483, -0.6004021167755127, -0.6030275821685791, -0.6033242344856262, -0.5992010235786438, -0.6027380228042603, -0.6042390465736389, -0.5996551513671875, -0.6001970767974854, -0.6016270518302917, -0.6062532067298889, -0.6110777258872986, -0.6191348433494568]

#WIN_20250730_13_18_25_Pro
#positionsRaw = [-0.5769371390342712, -0.5740746855735779, -0.5770898461341858, -0.4597893953323364, -0.3182271420955658, -0.3103104829788208, -0.32622867822647095, -0.3242488503456116, -0.31667956709861755, -0.3476053774356842, -0.31001460552215576, -0.3363347351551056, -0.33099883794784546, -0.3194558322429657, -0.355131059885025, -0.36161133646965027, -0.32475364208221436, -0.3281310200691223, -0.3596455752849579, -0.31931939721107483, -0.3468552827835083, -0.34195294976234436, -0.3420727252960205, -0.3433576226234436, -0.3209373950958252, -0.31046122312545776, -0.3129536807537079, -0.3423405885696411, -0.26208269596099854, -0.283790647983551, -0.30067604780197144, -0.314946711063385, -0.32050061225891113, -0.3248846232891083, -0.32607752084732056, -0.3185686767101288, -0.313082218170166, -0.29819127917289734, -0.3124721646308899, -0.2901393175125122, -0.2827919125556946, -0.3584807515144348, -0.5600556135177612, -0.5775519609451294, -0.559845507144928, -0.5619506239891052, -0.5638207793235779, -0.562956690788269, -0.5465201735496521, -0.46155616641044617, -0.46768853068351746, -0.4707203805446625, -0.4835139513015747, -0.49003973603248596, -0.4666587710380554, -0.46244728565216064, -0.4651973843574524, -0.46304750442504883, -0.4646764397621155, -0.4631357789039612, -0.46610090136528015, -0.4652743339538574, -0.4655599892139435, -0.4645654559135437, -0.4643259346485138, -0.4652031362056732, -0.46381792426109314, -0.4677707552909851, -0.4817902445793152, -0.5538103580474854, -0.5733431577682495, -0.5736222863197327, -0.5762903094291687, -0.5738833546638489, -0.5732836127281189, -0.5746466517448425, -0.5737695693969727, -0.5734359622001648, -0.5727670192718506, -0.5753656625747681, -0.5746026635169983, -0.5686521530151367, -0.5693199634552002, -0.5459888577461243, -0.5008711218833923, -0.5323912501335144, -0.5874128341674805, -0.5724669694900513, -0.5735823512077332, -0.5695264339447021, -0.5409075617790222, -0.5539050698280334, -0.5733664631843567, -0.5331226587295532, -0.5600557327270508, -0.5625374913215637, -0.5629031658172607, -0.5614351630210876, -0.5606737732887268, -0.5653530359268188, -0.5638149976730347, -0.5636937022209167, -0.5676081776618958, -0.5682761669158936, -0.5663168430328369]

#WIN_20250807_22_09_59_Pro
#positionsRaw = [-0.5552467107772827, -0.5575050115585327, -0.5547241568565369, -0.5552079677581787, -0.5537046790122986, -0.5550739169120789, -0.5603233575820923, -0.558410108089447, -0.556111216545105, -0.5549485087394714, -0.5540817975997925, -0.5486639738082886, -0.550300657749176, -0.5524222254753113, -0.5448290705680847, -0.5410730242729187, -0.5540720224380493, -0.5465800166130066, -0.5421454310417175, -0.5450124144554138, -0.5542744398117065, -0.5535391569137573, -0.557087779045105, -0.5550669431686401, -0.5549185276031494, -0.5550576448440552, -0.5546522736549377, -0.5530620813369751, -0.5539104342460632, -0.5571193695068359, -0.4896440804004669, -0.3626510202884674, -0.3210582435131073, -0.31704971194267273, -0.3176006078720093, -0.31616857647895813, -0.3161524534225464, -0.31558555364608765, -0.32404544949531555, -0.37539342045783997, -0.47627994418144226, -0.5424699783325195, -0.5563902258872986, -0.5504263639450073, -0.5551201701164246, -0.5561397075653076, -0.5528457164764404, -0.5406212210655212, -0.526049017906189, -0.4930375814437866, -0.4989028573036194, -0.519047200679779, -0.5252115726470947, -0.5204970836639404, -0.5179212093353271, -0.49822506308555603, -0.49430567026138306, -0.514960765838623, -0.517254114151001, -0.5344694256782532, -0.5346505641937256, -0.5124619603157043, -0.5027458071708679, -0.5001258850097656, -0.5108247399330139, -0.5216848850250244, -0.5278112888336182, -0.5468096733093262, -0.5405166745185852, -0.5197661519050598, -0.5179197788238525, -0.5355410575866699, -0.5419424772262573, -0.5444707274436951, -0.5472091436386108, -0.5478403568267822, -0.5346162915229797, -0.5142062902450562, -0.49198102951049805, -0.47969093918800354, -0.4804863929748535, -0.4940376281738281, -0.5289660692214966, -0.5602484941482544, -0.5219687819480896, -0.5521202087402344, -0.5337067246437073, -0.5481324195861816, -0.5499670505523682, -0.5435966849327087, -0.5425155162811279, -0.5427634716033936, -0.5432640314102173, -0.5423605442047119, -0.5537596940994263, -0.5536045432090759, -0.5571656823158264, -0.561762809753418, -0.5411244630813599, -0.5567757487297058, -0.5228410363197327, -0.4713945686817169, -0.41846197843551636, -0.3839385211467743, -0.38767701387405396, -0.4224303662776947, -0.4341500997543335, -0.44313791394233704, -0.42096129059791565, -0.41557633876800537, -0.4112900197505951, -0.4105243682861328, -0.4008129835128784, -0.40006205439567566, -0.4010615944862366, -0.4007968604564667, -0.3996562063694, -0.40050289034843445, -0.40109124779701233, -0.40075600147247314, -0.403234601020813, -0.40070581436157227, -0.40199029445648193, -0.40079912543296814, -0.3941762149333954, -0.3917367160320282, -0.3872411549091339, -0.37865889072418213, -0.3701820373535156, -0.3706068992614746, -0.3615291118621826, -0.3416214883327484, -0.3705308139324188, -0.3842173218727112, -0.36138883233070374, -0.3496458828449249, -0.3737952709197998, -0.3944482207298279, -0.40437638759613037, -0.3942670226097107, -0.38472840189933777, -0.3859541714191437, -0.3750235140323639, -0.37169307470321655, -0.3714345395565033, -0.362861305475235, -0.38701707124710083, -0.41733965277671814, -0.43531179428100586, -0.43765026330947876, -0.44810909032821655, -0.45556360483169556, -0.49544063210487366, -0.5357822179794312, -0.5354581475257874, -0.5704487562179565, -0.5716345310211182, -0.5444097518920898, -0.5489383935928345, -0.5594587326049805, -0.5575106143951416, -0.554951548576355, -0.5541481971740723, -0.5520671606063843, -0.55387943983078, -0.5526964068412781, -0.5702239274978638, -0.4279383420944214, -0.297839492559433, -0.3875153362751007, -0.4461517333984375, -0.45448270440101624, -0.44915279746055603, -0.44642359018325806, -0.4523461163043976, -0.451678603887558, -0.45197364687919617, -0.4521268308162689, -0.4547431170940399, -0.45316824316978455, -0.45567673444747925, -0.4503462016582489, -0.45390447974205017, -0.45036232471466064, -0.4495004415512085, -0.45407265424728394, -0.45095622539520264, -0.45255619287490845, -0.45230093598365784, -0.4740849435329437, -0.4518511891365051, -0.3955233693122864, -0.3216455578804016, -0.28446701169013977, -0.26697203516960144, -0.3110281825065613, -0.37209346890449524, -0.41241562366485596, -0.44041842222213745, -0.44095131754875183, -0.4394771158695221, -0.43667393922805786, -0.43314841389656067, -0.43315747380256653, -0.4395609200000763, -0.4350239932537079, -0.4401291608810425, -0.4395608603954315, -0.43336474895477295, -0.4327453672885895, -0.4311053454875946, -0.4256387948989868, -0.426508367061615, -0.42565447092056274, -0.4278603494167328, -0.4264616370201111, -0.43042099475860596, -0.4397502839565277, -0.4419790506362915, -0.4389897584915161, -0.4198121726512909, -0.4193483889102936, -0.45346778631210327, -0.466465026140213, -0.45564618706703186, -0.4528786242008209, -0.4541369080543518, -0.4322742521762848, -0.3924671709537506, -0.37976646423339844, -0.41160455346107483, -0.42289817333221436, -0.42590028047561646, -0.43652284145355225, -0.4354681372642517, -0.4423268735408783, -0.44419828057289124, -0.43786299228668213, -0.4315607249736786, -0.42089542746543884, -0.4163007438182831, -0.4247439503669739, -0.4190743863582611, -0.42337527871131897, -0.4217667579650879, -0.42467591166496277, -0.42319902777671814, -0.41739600896835327, -0.4159369170665741, -0.4147048890590668, -0.418326735496521, -0.4189515709877014, -0.4206150472164154, -0.4216500222682953, -0.42042815685272217, -0.4185885488986969, -0.41294506192207336, -0.4055660665035248, -0.4103187620639801, -0.4052506387233734, -0.38644087314605713, -0.3938322365283966, -0.3862360715866089, -0.3906865119934082, -0.3921738564968109, -0.3947160542011261, -0.39645302295684814, -0.39926326274871826, -0.3984360694885254, -0.39936700463294983, -0.398150771856308, -0.3982040286064148, -0.39705249667167664, -0.3963533937931061, -0.39496973156929016, -0.3886633515357971, -0.3746581971645355, -0.39885058999061584, -0.41218820214271545, -0.41428646445274353, -0.41773444414138794, -0.42072269320487976, -0.4368397891521454, -0.46326419711112976, -0.4772929847240448, -0.4514482617378235, -0.3822536766529083, -0.38766828179359436, -0.3883914649486542, -0.3984126150608063, -0.46903151273727417, -0.5566270351409912, -0.5530882477760315, -0.5587800145149231, -0.5549115538597107, -0.5519688725471497, -0.5539075136184692, -0.5507276654243469, -0.5483869910240173, -0.555696964263916, -0.555665910243988, -0.5525599718093872, -0.5527302026748657, -0.5610079169273376, -0.47060757875442505, -0.41265878081321716, -0.4120386838912964, -0.41548097133636475, -0.4197041392326355, -0.4200618267059326, -0.3964274525642395, -0.3724061846733093, -0.3869098126888275, -0.39806947112083435, -0.4325350821018219, -0.4793205261230469, -0.4816044569015503, -0.4288316071033478, -0.3682781755924225, -0.3567828834056854, -0.3600742816925049, -0.3682572543621063, -0.37742823362350464, -0.3843109607696533, -0.38201022148132324, -0.38157907128334045, -0.40748706459999084, -0.47694891691207886, -0.556528627872467, -0.5674207210540771, -0.5696234107017517, -0.5695849061012268, -0.5629444718360901, -0.5508594512939453, -0.5474384427070618, -0.551487386226654, -0.5573879480361938, -0.5585235357284546, -0.5626659989356995, -0.5645272135734558, -0.5652170777320862, -0.5645743608474731, -0.5668100118637085, -0.566612184047699, -0.5644782781600952, -0.5653411149978638, -0.5644510388374329, -0.565916121006012, -0.5674355030059814, -0.5668126344680786, -0.5655639171600342, -0.5671080350875854, -0.5684308409690857, -0.5686222314834595, -0.565682590007782, -0.5663748979568481, -0.5667470097541809, -0.5664539933204651, -0.5677313208580017, -0.5609731674194336, -0.5646146535873413, -0.5614604353904724, -0.562929093837738, -0.56785649061203, -0.5671624541282654, -0.5653543472290039, -0.5692289471626282, -0.5660640001296997, -0.5648311376571655, -0.563148021697998, -0.5632274150848389, -0.5621837377548218, -0.5684145092964172, -0.5663933157920837, -0.5660143494606018, -0.5673421025276184, -0.568633496761322, -0.565980076789856, -0.5661784410476685, -0.5647343993186951, -0.5618233680725098, -0.5642216801643372, -0.5540666580200195, -0.528812050819397, -0.41185659170150757, -0.36793139576911926, -0.41686028242111206, -0.41609108448028564, -0.4150651693344116, -0.4198154807090759, -0.42277297377586365, -0.42244911193847656, -0.4176565408706665, -0.4172082543373108, -0.41433969140052795, -0.38838857412338257, -0.3888055682182312, -0.3935372233390808, -0.3950996398925781, -0.3909001648426056, -0.3878842294216156, -0.3736869692802429, -0.3788830637931824, -0.361821711063385, -0.36613693833351135, -0.37159374356269836, -0.378934770822525, -0.3831166923046112, -0.38397538661956787, -0.3819553256034851, -0.3811606168746948, -0.3756357431411743, -0.3775607645511627, -0.3744749426841736, -0.3624989092350006, -0.39147645235061646, -0.4310317039489746, -0.3319510221481323, -0.25809013843536377, -0.3113078773021698, -0.3562658429145813, -0.40616750717163086, -0.4446159899234772, -0.3765365481376648, -0.30342647433280945, -0.2965712249279022, -0.3236955404281616, -0.4431869089603424, -0.5472866892814636, -0.5701839923858643, -0.5479841232299805, -0.5474872589111328, -0.5517529845237732, -0.5456231832504272, -0.5544857978820801, -0.5495687127113342, -0.5626426935195923, -0.5595351457595825, -0.561066210269928, -0.5554638504981995, -0.5564472675323486, -0.5609312653541565, -0.5672385096549988, -0.5647736191749573, -0.5634673237800598, -0.5638088583946228, -0.5578860640525818, -0.5634727478027344, -0.5613000988960266, -0.5571167469024658, -0.5580737590789795, -0.480599045753479, -0.37736713886260986, -0.386154443025589, -0.3466700613498688, -0.3573136329650879, -0.3573746085166931, -0.445121169090271, -0.3488246500492096, -0.3668689429759979, -0.3560883402824402, -0.3728480041027069, -0.3735354244709015, -0.385000616312027, -0.382163405418396, -0.38200581073760986, -0.38503798842430115, -0.38131171464920044, -0.38333919644355774, -0.3882406949996948, -0.3879776895046234, -0.3900200426578522, -0.39147868752479553, -0.39221271872520447, -0.3919731080532074, -0.39158961176872253, -0.3906792402267456, -0.39348217844963074, -0.3936466574668884, -0.38012465834617615, -0.40108582377433777, -0.39491382241249084, -0.3935253620147705, -0.3922950029373169, -0.38675418496131897, -0.38854238390922546, -0.3856927752494812, -0.38676053285598755, -0.40881797671318054, -0.4242169260978699, -0.4589384198188782, -0.5128660202026367, -0.5560869574546814, -0.5614140629768372, -0.5685573816299438, -0.5675878524780273, -0.5618139505386353, -0.5344900488853455, -0.4575745165348053, -0.3936755359172821, -0.3222786784172058, -0.39570480585098267, -0.3754562735557556, -0.37996983528137207, -0.3848702609539032, -0.37473323941230774, -0.3061040937900543, -0.31672945618629456, -0.3744727373123169, -0.38525086641311646, -0.3682084083557129, -0.3645070493221283, -0.40919029712677, -0.47409939765930176, -0.5334921479225159, -0.5357024073600769, -0.5063141584396362, -0.5281057357788086, -0.5269142389297485, -0.5527703762054443, -0.5519921183586121, -0.5597823262214661, -0.5523149967193604, -0.5502952337265015, -0.54889315366745, -0.5533271431922913, -0.5491142868995667, -0.5515738129615784]
#positionsRaw = [-0.5552467107772827, -0.5550739169120789, -0.5540817975997925, -0.5410730242729187, -0.5542744398117065, -0.5550576448440552, -0.4896440804004669, -0.31616857647895813, -0.47627994418144226, -0.5561397075653076, -0.4989028573036194, -0.49822506308555603, -0.5346505641937256, -0.5216848850250244, -0.5179197788238525, -0.5478403568267822, -0.4804863929748535, -0.5521202087402344, -0.5425155162811279, -0.5536045432090759, -0.5228410363197327, -0.4224303662776947, -0.4112900197505951, -0.4007968604564667, -0.403234601020813, -0.3917367160320282, -0.3615291118621826, -0.3496458828449249, -0.38472840189933777, -0.362861305475235, -0.44810909032821655, -0.5704487562179565, -0.5575106143951416, -0.5526964068412781, -0.4461517333984375, -0.451678603887558, -0.45567673444747925, -0.45407265424728394, -0.4518511891365051, -0.3110281825065613, -0.4394771158695221, -0.4350239932537079, -0.4311053454875946, -0.4264616370201111, -0.4198121726512909, -0.4528786242008209, -0.41160455346107483, -0.4423268735408783, -0.4163007438182831, -0.42467591166496277, -0.418326735496521, -0.4185885488986969, -0.38644087314605713, -0.3947160542011261, -0.398150771856308, -0.3886633515357971, -0.41773444414138794, -0.4514482617378235, -0.46903151273727417, -0.5519688725471497, -0.555665910243988, -0.41265878081321716, -0.3964274525642395, -0.4793205261230469, -0.3600742816925049, -0.38157907128334045, -0.5696234107017517, -0.551487386226654, -0.5652170777320862, -0.5653411149978638, -0.5655639171600342, -0.5663748979568481, -0.5646146535873413, -0.5653543472290039, -0.5632274150848389, -0.5673421025276184, -0.5618233680725098, -0.36793139576911926, -0.42277297377586365, -0.38838857412338257, -0.3878842294216156, -0.37159374356269836, -0.3811606168746948, -0.39147645235061646, -0.3562658429145813, -0.2965712249279022, -0.5479841232299805, -0.5495687127113342, -0.5564472675323486, -0.5638088583946228, -0.5580737590789795, -0.3573136329650879, -0.3560883402824402, -0.38200581073760986, -0.3879776895046234, -0.39158961176872253, -0.40108582377433777, -0.38854238390922546, -0.4589384198188782, -0.5675878524780273, -0.3222786784172058, -0.37473323941230774, -0.3682084083557129, -0.5357024073600769, -0.5519921183586121, -0.5533271431922913]

#testvidforvolo2
#positionsRaw = [-0.6665587425231934, -0.8471842408180237, -0.7088544964790344, -0.7078499794006348, -0.7246147394180298, -0.736032247543335, -0.7218276262283325, -0.7710337042808533, -0.7164474725723267, -0.7492815852165222, -0.6518005132675171, -0.6294466853141785, -0.6633780598640442, -0.7276588678359985, -0.7381752729415894, -0.7488211989402771, -0.742401659488678, -0.7284032106399536, -0.7290948033332825, -0.7035536170005798, -0.6501214504241943, -0.5714004039764404, -0.512443482875824, -0.4156032204627991, -0.36551612615585327, -0.36167728900909424, -0.38681843876838684, -0.3955696225166321, -0.46058085560798645, -0.6032553911209106, -0.6800903081893921, -0.6834769248962402, -0.6556568145751953, -0.6105014085769653, -0.5214985609054565, -0.5244902968406677, -0.5555800795555115, -0.582763671875, -0.5870076417922974, -0.5979515910148621, -0.6018542647361755, -0.6090574860572815, -0.623028576374054, -0.6204662919044495, -0.5806005597114563, -0.5991300940513611, -0.5926516652107239, -0.5545434355735779, -0.585647702217102, -0.6110655665397644, -0.5455873608589172, -0.5323389172554016, -0.5890328288078308, -0.6173325777053833, -0.6159119009971619, -0.6329963207244873, -0.6832544207572937, -0.6189239621162415, -0.5720062255859375, -0.9221348166465759, -0.5722752213478088, -0.5862179398536682, -0.6458415389060974, -0.6616730690002441, -0.6720640659332275, -0.6279154419898987, -0.634189248085022, -0.6510698795318604, -0.6632769703865051, -0.6722920536994934, -0.9222765564918518, -0.5817573666572571, -0.566536009311676, -0.5745383501052856, -0.6029279232025146, -0.6228707432746887, -0.6089798808097839, -0.6155280470848083, -0.6190099120140076, -0.6105709671974182, -0.6160895824432373, -0.6131978631019592, -0.6115777492523193, -0.6114567518234253, -0.6161765456199646, -0.6182027459144592, -0.6124014258384705, -0.7065810561180115, -0.4956824481487274, -0.4688691794872284, -0.535638153553009, -0.58024001121521, -0.7514404058456421, -0.7575071454048157, -0.768464207649231, -0.7589980363845825, -0.7614239454269409, -0.7803199887275696, -0.7893304824829102, -0.7572470903396606, -0.7564472556114197, -0.7690222859382629, -0.7933253645896912, -0.7820051312446594, -0.7453309893608093, -0.6839208006858826, -0.681364119052887, -0.9033845067024231, -0.4829697608947754, -0.40601950883865356, -0.8599259853363037, -0.817082405090332, -0.848262369632721, -0.7726396322250366, -0.5806024670600891, -0.6877967715263367, -0.7562357783317566, -0.6444446444511414, -0.6317870616912842, -0.5291211605072021, -0.5055065751075745, -0.480609267950058, -0.47116607427597046, -0.4513310194015503, -0.4316810965538025, -0.42095011472702026, -0.4273810386657715, -0.46005961298942566, -0.4789067506790161, -0.4788496792316437, -0.46056392788887024, -0.4730372428894043, -0.4713396430015564, -0.45756933093070984, -0.4621489942073822, -0.4570511281490326, -0.4450250267982483, -0.4341261088848114, -0.42357778549194336, -0.42456573247909546, -0.42007824778556824, -0.4209127724170685, -0.40920528769493103, -0.40213441848754883, -0.40103864669799805, -0.40025070309638977, -0.4076099395751953, -0.40706562995910645, -0.40948131680488586, -0.41115280985832214, -0.4090128540992737, -0.40672633051872253, -0.40469834208488464, -0.4038161337375641, -0.40880581736564636, -0.4145057797431946, -0.40939152240753174, -0.4119832217693329, -0.4126259684562683, -0.4142689108848572, -0.4101119935512543, -0.40235239267349243, -0.4056476056575775, -0.3926798403263092, -0.39339855313301086, -0.40578198432922363, -0.40635985136032104, -0.40352800488471985, -0.42816784977912903, -0.43573400378227234, -0.4483066201210022, -0.455976277589798, -0.464740127325058, -0.4880583584308624, -0.542488157749176, -0.9704685807228088, -0.4214657247066498, -0.559201180934906, -0.5072367787361145, -0.501029908657074, -0.48816192150115967, -0.6787204146385193, -0.9043570756912231, -0.5065503716468811, -0.697331428527832, -0.6034037470817566, -0.820647120475769, -0.6997772455215454]

#testvidforvolo4
#positionsRaw = [-0.7141709327697754, -0.6668952107429504, -0.5935421586036682, -0.5153634548187256, -0.4343007802963257, -0.3925217092037201, -0.36607062816619873, -0.38122498989105225, -0.387214332818985, -0.4102901816368103, -0.523078978061676, -0.6993070244789124, -0.7061346173286438, -0.6708735227584839, -0.6287314891815186, -0.5258868932723999, -0.521787703037262, -0.5360573530197144, -0.5806787014007568, -0.5865898132324219, -0.5926468968391418, -0.6005404591560364, -0.6067708134651184, -0.6113411784172058, -0.6253456473350525, -0.5880457758903503, -0.5898808836936951, -0.6070455312728882, -0.5546263456344604, -0.5723821520805359, -0.6110480427742004, -0.5847840905189514, -0.5371008515357971, -0.5408570170402527, -0.6145447492599487, -0.6195769906044006, -0.6277299523353577, -0.6629257798194885, -0.6616753935813904, -0.5787985324859619, -0.9257525205612183, -0.9225661158561707, -0.5742062926292419, -0.64150071144104, -0.6817396283149719, -0.7072135210037231, -0.6453617811203003, -0.6280605792999268, -0.9206749796867371, -0.6546347737312317, -0.676346480846405, -0.9238539934158325, -0.6038874983787537, -0.5638986825942993, -0.5646509528160095, -0.5854188203811646, -0.6140827536582947, -0.614050030708313, -0.612525999546051, -0.619744062423706, -0.6090456247329712, -0.6132108569145203, -0.6132286190986633, -0.6143186092376709, -0.6123767495155334, -0.6159670352935791, -0.6158982515335083, -0.6159684062004089, -0.5786091685295105, -0.5159024000167847, -0.4403446614742279, -0.4923397898674011, -0.561825156211853, -0.747494101524353, -0.7800265550613403, -0.7633971571922302]

#WIN_20250816_19_07_45_Pro.mp4
positionsRaw = [-0.6074753403663635, -0.6062735915184021, -0.6062449216842651, -0.614660382270813, -0.620242714881897, -0.6001123785972595, -0.6156981587409973, -0.6015669703483582, -0.610158383846283, -0.6168836951255798, -0.6130152940750122, -0.604241132736206, -0.6273782253265381, -0.6070395112037659, -0.604516863822937, -0.6107103824615479, -0.624430239200592, -0.6257867813110352, -0.6219754815101624, -0.6130033135414124, -0.6254703402519226, -0.6143162250518799, -0.5945127010345459, -0.6007453203201294, -0.6390682458877563, -0.6233026385307312, -0.6287297010421753, -0.6254047155380249, -0.6189873218536377, -0.6323572993278503, -0.6242671608924866, -0.6134073734283447, -0.6435537338256836, -0.6251464486122131, -0.6365731358528137, -0.6261724829673767, -0.6304678916931152, -0.6033461689949036, -0.624896764755249, -0.6007647514343262, -0.6139307022094727, -0.61332768201828, -0.6036441326141357, -0.6213781833648682, -0.5908907651901245, -0.5994323492050171, -0.5970791578292847, -0.5956405401229858, -0.600854754447937, -0.6116090416908264, -0.6042340993881226, -0.6055541038513184, -0.595865786075592, -0.5952743291854858, -0.5945941209793091, -0.5980826616287231, -0.5914298295974731, -0.5935865640640259, -0.6053872108459473, -0.6193463802337646, -0.6207940578460693, -0.6324234008789062, -0.6257815957069397, -0.6263408064842224, -0.6219869256019592, -0.4815171957015991, -0.41473671793937683, -0.39896491169929504, -0.44102147221565247, -0.3905387818813324, -0.4035024344921112, -0.38139545917510986, -0.3970523774623871, -0.3886401355266571, -0.3755820393562317, -0.384308397769928, -0.39231252670288086, -0.37682044506073, -0.31834834814071655, -0.36675381660461426, -0.43736961483955383, -0.3732786774635315, -0.3818647563457489, -0.37046653032302856, -0.3972780406475067, -0.3426496684551239, -0.388047456741333, -0.366117000579834, -0.34743237495422363, -0.38577741384506226, -0.359092116355896, -0.37986472249031067, -0.3644757866859436, -0.3669244050979614, -0.37460607290267944, -0.3624975085258484, -0.3795308470726013, -0.3575247824192047, -0.37783342599868774]

pandasPositions = pd.Series(positionsRaw)

#pandasPositions = pandasPositions.rolling(window=10).mean()

positions = pandasPositions.tolist()

positions[0],positions[1],positions[2],positions[3],positions[4],positions[5],positions[6],positions[7],positions[8] = positionsRaw[0],positionsRaw[1],positionsRaw[2],positionsRaw[3],positionsRaw[4],positionsRaw[5],positionsRaw[6],positionsRaw[7],positionsRaw[8]

print(positions)

#for pos in positions:
#    positions[positions.index(pos)] = section_y((pos+1)*720,9)

print(positions)

time = np.arange(len(positions))

# Calculate the change in position and change in time
delta_position = np.diff(positions)
delta_time = np.diff(time)

# Calculate velocity
velocityRaw = delta_position / delta_time
pandasVelocity = pd.Series(velocityRaw)

#velocity_moving_average = pandasVelocity.rolling(window=10).mean()
#velocity_moving_average = velocity_moving_average.tolist()

velocity_moving_average=pandasVelocity.tolist()

velocity_moving_average[0],velocity_moving_average[1],velocity_moving_average[2],velocity_moving_average[3],velocity_moving_average[4],velocity_moving_average[5],velocity_moving_average[6],velocity_moving_average[7],velocity_moving_average[8] = velocityRaw[0],velocityRaw[1],velocityRaw[2],velocityRaw[3],velocityRaw[4],velocityRaw[5],velocityRaw[6],velocityRaw[7],velocityRaw[8]

print(f'velocity_moving_average length: {len(velocity_moving_average)}')

time_velocity = ((time[:-1] + time[1:]) / 2)

left_wrist_velocities = np.column_stack((time_velocity,velocity_moving_average))
left_wrist_velocities = left_wrist_velocities
print(f'left_wrist_velocities type: {(len(left_wrist_velocities))}')
first_line_left = LineString(left_wrist_velocities)
o_one_positive = np.column_stack((np.arange(1, len(velocityRaw) -1 ),np.full_like(np.arange(1, len(velocityRaw) -1 ), 0.05, dtype=np.float64)))
o_one_positive = LineString(o_one_positive)
o_one_negative = np.column_stack((np.arange(1, len(velocityRaw) -1 ),np.full_like(np.arange(1, len(velocityRaw) -1 ), -0.05, dtype=np.float64)))
o_one_negative = LineString(o_one_negative)
print(first_line_left)

intersection_o_one_positive = first_line_left.intersection(o_one_positive)
intersection_o_one_negative = first_line_left.intersection(o_one_negative)

o_one_positive_intersections = []
if intersection_o_one_positive.geom_type == 'MultiPoint':
    #plt.plot(*LineString(intersection_left.geoms).xy, 'o')
    o_one_positive_intersections = sorted(((LineString(intersection_o_one_positive.geoms).xy)[0]).tolist())
elif intersection_o_one_positive.geom_type == 'Point':
    #plt.plot(*intersection_left.xy, 'o')
    o_one_positive_intersections = [intersection_o_one_positive.xy[0].tolist()[0]]

o_one_positive_intersections = sorted(o_one_positive_intersections)

#for i in left_stomach_intersections:
#    left_stomach_intersections[left_stomach_intersections.index(i)] = i*10/30.092253624249526

#print(f'left_stomach_intersections: {o_one_positive_intersections}')

peakspositive = []

print((o_one_positive_intersections))
print(f'o_one_positive_intersections: {o_one_positive_intersections}, length: {len(o_one_positive_intersections)}')
for x in range(0,len(o_one_positive_intersections),2):
    peakspositive.append(o_one_positive_intersections[x])#+o_one_positive_intersections[x+1])/2)

print(f'peakspositive: {peakspositive}')

########################

o_one_negative_intersections = []
if intersection_o_one_negative.geom_type == 'MultiPoint':
    #plt.plot(*LineString(intersection_left.geoms).xy, 'o')
    o_one_negative_intersections = sorted(((LineString(intersection_o_one_negative.geoms).xy)[0]).tolist())
elif intersection_o_one_negative.geom_type == 'Point':
    #plt.plot(*intersection_left.xy, 'o')
    o_one_negative_intersections = [intersection_o_one_negative.xy[0].tolist()[0]]

o_one_negative_intersections = sorted(o_one_negative_intersections)

#for i in left_stomach_intersections:
#    left_stomach_intersections[left_stomach_intersections.index(i)] = i*10/30.092253624249526

#print(f'left_stomach_intersections: {o_one_negative_intersections}')

peaksnegative = []

if len(o_one_negative_intersections) % 2 != 0:
    o_one_negative_intersections.pop()
if len(o_one_positive_intersections) % 2 != 0:
    o_one_positive_intersections.pop()

print(f'o_one_negative_intersections: {o_one_negative_intersections}, length: {len(o_one_negative_intersections)}')
for x in range(0,len(o_one_negative_intersections),2):
    print(o_one_negative_intersections[x])
    peaksnegative.append(o_one_negative_intersections[x])#+o_one_negative_intersections[x+1])/2)

print(f'peaksnegative: {peaksnegative}')

peaks = []
for positivePeak in peakspositive:
    peaks.append(['positive',positivePeak])#/30.106100795755967*3])
for negativePeak in peaksnegative:
    peaks.append(['negative',negativePeak])#/30.106100795755967*3])

peaks.sort(key=lambda peak:peak[1])

print(peaks)
peaksToDelete = []

for p in range(len(peaks)-1):
    if peaks[p][0] == peaks[p+1][0]:
        print(f'Peaks matched: {peaks[p]} and {peaks[p+1]}')
        peaksToDelete.append(p)
else:
    print(':(')

print(f'undeleted peaks: {peaks}')
#########################

gestures = []
upToPositive = False
for peak in peaks:
    if peak[0] == 'negative':
        if upToPositive != False:
            gestures.append(f"Gesture from {upToPositive} to {peak[1]}")
            upToPositive = False
    if peak[0] == 'positive':
        if upToPositive == False:
            upToPositive = peak[1]
    else:
        upToPositive = False

#for g in range(len(gestures)):
#    gestures[g] = gestures[g]/16.466364913375998

print(gestures)

plt.figure(figsize=(8, 5))
print(len(positionsRaw))
print(len(time_velocity))
plt.plot(positionsRaw,marker='x', linestyle='-',label='positionsRaw')
plt.plot(positions,marker='o', linestyle='--',label='positions')
plt.plot(time_velocity,velocity_moving_average,marker='*', linestyle='--',label='velocity')
plt.title('Velocity-Time Graph')
plt.xlabel('Time (s)')
plt.ylabel('Velocity (m/s)')
plt.legend()
plt.grid(True)
plt.show()